(function(){"use strict";var e={1975:function(e,n,o){var t=o(8760),r=o(1839);const i={class:"app"},s={class:"display"};function l(e,n,o,t,l,a){const c=(0,r.up)("BarComponent"),d=(0,r.up)("FriendsComponent"),u=(0,r.up)("UploadComponent"),p=(0,r.up)("SendRequest"),f=(0,r.up)("ToggleSwitch");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(c),(0,r._)("div",s,[l.store.isSelected?((0,r.wg)(),(0,r.j4)(d,{key:0})):((0,r.wg)(),(0,r.j4)(u,{key:1,onFileSelected:a.fileSelected,class:"uploader"},null,8,["onFileSelected"])),l.store.sendRequest?((0,r.wg)(),(0,r.j4)(p,{key:2,name:l.store.senderName},null,8,["name"])):(0,r.kq)("",!0),(0,r.Wm)(f),(0,r._)("p",{class:"userid",onClick:n[0]||(n[0]=e=>a.copyID())},"Click Here to copy ID to clipboard")])])}o(7658);const a={class:"Menu"};function c(e,n,o,t,i,s){return(0,r.wg)(),(0,r.iD)("div",a)}var d={name:"MenuComponent",props:{}},u=o(5926);const p=(0,u.Z)(d,[["render",c]]);var f=p;const v=e=>((0,r.dD)("data-v-35c534af"),e=e(),(0,r.Cn)(),e),g={class:"bar"},m=v((()=>(0,r._)("div",{class:"left"},[(0,r._)("img",{src:"https://creazilla-store.fra1.digitaloceanspaces.com/cliparts/70345/cartoon-flame-clipart-md.png",class:"logo",alt:""}),(0,r._)("h1",null,"Fire Transfer")],-1))),h={class:"right"},b=v((()=>(0,r._)("i",{class:"fa-solid fa-minus"},null,-1))),w=[b],_=v((()=>(0,r._)("i",{class:"fa-regular fa-window-maximize"},null,-1))),y=[_],F=v((()=>(0,r._)("i",{class:"fa-solid fa-xmark"},null,-1))),C=[F];function S(e,n){return(0,r.wg)(),(0,r.iD)("div",g,[m,(0,r._)("div",h,[(0,r._)("button",{class:"minimise",onClick:n[0]||(n[0]=n=>e.minimise())},w),(0,r._)("button",{class:"maximise",onClick:n[1]||(n[1]=n=>e.maximise())},y),(0,r._)("button",{class:"close",onClick:n[2]||(n[2]=n=>e.closeApp())},C)])])}const k={},D=(0,u.Z)(k,[["render",S],["__scopeId","data-v-35c534af"]]);var x=D;const P=e=>((0,r.dD)("data-v-12b42e9b"),e=e(),(0,r.Cn)(),e),T={key:0,class:"sending"},I=["max","value"],R={key:1,class:"complete"},z={key:2,class:"friends"},E=P((()=>(0,r._)("h2",null,"Friends ID:",-1))),M=P((()=>(0,r._)("input",{id:"Inputid",type:"text"},null,-1))),j={class:"buttons"};function N(e,n,o,t,i,s){return i.sending?((0,r.wg)(),(0,r.iD)("div",T,[(0,r.Uk)(" Sending... "),(0,r._)("progress",{id:"uploadProgress",max:i.ProgressMax,value:i.sendProgressValue},null,8,I)])):i.completed?((0,r.wg)(),(0,r.iD)("div",R," File Transfer Complete! ")):((0,r.wg)(),(0,r.iD)("div",z,[E,M,(0,r._)("div",j,[(0,r._)("button",{onClick:n[0]||(n[0]=e=>s.Submit())},"Connect"),(0,r._)("button",{onClick:n[1]||(n[1]=e=>s.SendFile())},"Send File")])]))}var O=o(2490);const L=e=>((0,r.dD)("data-v-52d50354"),e=e(),(0,r.Cn)(),e),q={class:"friend"},U=L((()=>(0,r._)("a",{href:"pfp"},null,-1)));function Z(e,n,o,t,i,s){return(0,r.wg)(),(0,r.iD)("i",q,[U,(0,r.Uk)(" "+(0,O.zw)(o.name),1)])}var V={name:"FriendsComponent",components:{},props:{name:String}};const B=(0,u.Z)(V,[["render",Z],["__scopeId","data-v-52d50354"]]);var A=B,H=o(4517);const W=(0,H.qj)({recieveEnabled:!1,sendRequest:!1,senderName:"",id:0,uploadedFile:[],file:[],fileName:"",fileType:"",ProgressMax:0,sendProgressValue:0,isSelected:!1,recievedFileName:0,recievedFileType:"",recievedFileSize:0,conn:null});var G,J=new Peer,K={name:"FriendsComponent",components:{FriendComponent:A},data(){return{store:W,sendProgressValue:0,ProgressMax:0,sending:!1,completed:!1}},methods:{Submit(e){let n=document.getElementById("Inputid").value;G=J.connect(n),G.send({request:"Connecting Request",from:W.id}),J.on("error",(function(e){console.log("error")}))},SendFile(){this.sending=!0;var e=W.uploadedFile;this.ProgressMax=e.size;const n=16384;let o=0;var t=new FileReader;console.log(e);var r=e.size;t.addEventListener("error",(e=>console.error("Error reading file:",e))),t.addEventListener("abort",(e=>console.log("File reading aborted:",e))),G.send({fileName:e.name,fileType:e.type,fileSize:e.size}),console.log(e),t.addEventListener("load",(e=>{console.log("FileRead.onload ",e),G.send(e.target.result),o+=e.target.result.byteLength,this.sendProgressValue=o,o<r&&i(o)}));const i=r=>{console.log("readSlice ",r);const i=e.slice(o,r+n);t.readAsArrayBuffer(i)};i(0)}}};const Q=(0,u.Z)(K,[["render",N],["__scopeId","data-v-12b42e9b"]]);var X=Q;const Y=e=>((0,r.dD)("data-v-377d4b19"),e=e(),(0,r.Cn)(),e),ee={key:0,class:"uploading"},ne=["max","value"],oe={key:1,class:"uploader"},te=Y((()=>(0,r._)("label",{for:"file-upload",class:"custom-file-upload"}," Choose File ",-1)));function re(e,n,o,t,i,s){return i.uploading?((0,r.wg)(),(0,r.iD)("div",ee,[(0,r.Uk)(" Sending... "),(0,r._)("progress",{id:"uploadProgress",max:i.store.uploadProgressMax,value:i.store.uploadProgressValue},null,8,ne)])):((0,r.wg)(),(0,r.iD)("div",oe,[te,(0,r._)("input",{onChange:n[0]||(n[0]=e=>s.onInputChange()),id:"file-upload",type:"file"},null,32)]))}var ie={data(){return{store:W,uploading:!1}},methods:{setisSelected(){this.$emit("isSelected",!0)},async onInputChange(){this.uploading=!0;var e=document.getElementById("file-upload").files[0];W.uploadedFile=e,W.isSelected=!0}}};const se=(0,u.Z)(ie,[["render",re],["__scopeId","data-v-377d4b19"]]);var le=se;const ae={class:"popup"},ce={class:"buttons"};function de(e,n,o,t,i,s){return(0,r.wg)(),(0,r.iD)("div",ae,[(0,r._)("h1",null,(0,O.zw)(o.name)+" would like to send you a file!",1),(0,r._)("div",ce,[(0,r._)("button",{onClick:n[0]||(n[0]=e=>s.accept()),class:"accept"},"Accept"),(0,r._)("button",{onClick:n[1]||(n[1]=e=>s.decline()),class:"decline"},"Decline")])])}var ue,pe=new Peer,fe={props:["name"],data(){return{store:W}},methods:{accept(){ue=pe.connect(W.conn.peer),ue.send("accept")},decline(){ue=pe.connect(W.conn.peer),ue.send("decline")}}};const ve=(0,u.Z)(fe,[["render",de],["__scopeId","data-v-14ba42f4"]]);var ge=ve;const me=e=>((0,r.dD)("data-v-10793836"),e=e(),(0,r.Cn)(),e),he={class:"toggle"},be={class:"switch"},we=me((()=>(0,r._)("span",{class:"slider round"},null,-1))),_e=me((()=>(0,r._)("p",null,"Recieve Files",-1)));function ye(e,n,o,t,i,s){return(0,r.wg)(),(0,r.iD)("div",he,[(0,r._)("label",be,[(0,r._)("input",{onClick:n[0]||(n[0]=(...e)=>s.toggleRecieve&&s.toggleRecieve(...e)),type:"checkbox"}),we]),_e])}var Fe={data(){return{store:W}},methods:{toggleRecieve(){0==W.recieveEnabled?W.recieveEnabled=!0:W.recieveEnabled=!1}}};const Ce=(0,u.Z)(Fe,[["render",ye],["__scopeId","data-v-10793836"]]);var Se=Ce,ke=new Peer;Te();var De={name:"App",components:{MenuComponent:f,FriendsComponent:X,UploadComponent:le,SendRequest:ge,BarComponent:x,ToggleSwitch:Se},data(){return{isFileSelected:!1,FileSelected:[],store:W,receiveProgressValue:0}},methods:{fileSelected(e){this.FileSelected=e},copyID(){navigator.clipboard.writeText(this.store.id)}}};ke.on("open",(function(e){console.log("My peer ID is: "+e),W.id=e,console.log(W.id)}));let xe=0,Pe=[];function Te(){$.ajax({url:"https://newguitarwhodis.github.io/Fire-Transfer/",error:function(){;"Unable to retrieve webpage source HTML"},success:function(e){e=$.parseHTML(e),$.each(e,(function(e,n){"meta"==n.nodeName.toString().toLowerCase()&&null!=$(n).attr("name")&&"undefined"!=typeof $(n).attr("name")&&"version"==$(n).attr("name")&&"1.0.0"!=$(n).attr("content")&&alert("New version available! Please download the latest version from https://newguitarwhodis.github.io/Fire-Transfer/")}))}})}ke.on("connection",(function(e){W.conn=e,console.log("connected"),e.send("hello!"),0==W.recieveEnabled?(e.close(),console.log("connection closed")):(W.sendRequest=!0,W.senderName=e.peer),e.on("data",(function(e){if(console.log(e),e.fileName&&e.fileType&&e.fileSize)W.recievedFileName=e.fileName,W.recievedFileType=e.fileType,W.recievedFileSize=e.fileSize,console.log("Received file info");else if(console.log(`Received Message ${e.byteLength}`),Pe.push(e),xe+=e.byteLength,W.receiveProgressValue=xe,xe==W.recievedFileSize){console.log("Received all data");const e=new Blob(Pe);var n=document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=W.recievedFileName,n.click(),xe=0}}))}));const Ie=(0,u.Z)(De,[["render",l]]);var Re=Ie;(0,t.ri)(Re).mount("#app")}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(n,t,r,i){if(!t){var s=1/0;for(d=0;d<e.length;d++){t=e[d][0],r=e[d][1],i=e[d][2];for(var l=!0,a=0;a<t.length;a++)(!1&i||s>=i)&&Object.keys(o.O).every((function(e){return o.O[e](t[a])}))?t.splice(a--,1):(l=!1,i<s&&(s=i));if(l){e.splice(d--,1);var c=r();void 0!==c&&(n=c)}}return n}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[t,r,i]}}(),function(){o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,{a:n}),n}}(),function(){o.d=function(e,n){for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};o.O.j=function(n){return 0===e[n]};var n=function(n,t){var r,i,s=t[0],l=t[1],a=t[2],c=0;if(s.some((function(n){return 0!==e[n]}))){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(a)var d=a(o)}for(n&&n(t);c<s.length;c++)i=s[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},t=self["webpackChunkFireTransfer"]=self["webpackChunkFireTransfer"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=o.O(void 0,[998],(function(){return o(1975)}));t=o.O(t)})();
//# sourceMappingURL=app.988729c2.js.map